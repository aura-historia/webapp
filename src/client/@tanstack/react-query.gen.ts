// This file is auto-generated by @hey-api/openapi-ts

import { queryOptions, type UseMutationOptions } from "@tanstack/react-query";

import { client } from "../client.gen";
import {
    complexSearchItems,
    createSearchFilter,
    deleteSearchFilter,
    getItem,
    getSearchFilter,
    getSearchFilters,
    type Options,
    searchItems,
    updateSearchFilter,
} from "../sdk.gen";
import type {
    ComplexSearchItemsData,
    ComplexSearchItemsError,
    ComplexSearchItemsResponse,
    CreateSearchFilterData,
    CreateSearchFilterError,
    CreateSearchFilterResponse,
    DeleteSearchFilterData,
    DeleteSearchFilterError,
    DeleteSearchFilterResponse,
    GetItemData2,
    GetSearchFilterData,
    GetSearchFiltersData,
    SearchItemsData,
    UpdateSearchFilterData,
    UpdateSearchFilterError,
    UpdateSearchFilterResponse,
} from "../types.gen";

export type QueryKey<TOptions extends Options> = [
    Pick<TOptions, "baseUrl" | "body" | "headers" | "path" | "query"> & {
        _id: string;
        _infinite?: boolean;
        tags?: ReadonlyArray<string>;
    },
];

const createQueryKey = <TOptions extends Options>(
    id: string,
    options?: TOptions,
    infinite?: boolean,
    tags?: ReadonlyArray<string>,
): [QueryKey<TOptions>[0]] => {
    const params: QueryKey<TOptions>[0] = {
        _id: id,
        baseUrl: options?.baseUrl || (options?.client ?? client).getConfig().baseUrl,
    } as QueryKey<TOptions>[0];
    if (infinite) {
        params._infinite = infinite;
    }
    if (tags) {
        params.tags = tags;
    }
    if (options?.body) {
        params.body = options.body;
    }
    if (options?.headers) {
        params.headers = options.headers;
    }
    if (options?.path) {
        params.path = options.path;
    }
    if (options?.query) {
        params.query = options.query;
    }
    return [params];
};

export const getItemQueryKey = (options: Options<GetItemData2>) =>
    createQueryKey("getItem", options);

/**
 * Get a single item
 * Retrieves a single item by its shop ID and shop's item ID.
 * Returns localized content based on Accept-Language header and currency preferences.
 * Optionally includes item history when requested.
 *
 */
export const getItemOptions = (options: Options<GetItemData2>) => {
    return queryOptions({
        queryFn: async ({ queryKey, signal }) => {
            const { data } = await getItem({
                ...options,
                ...queryKey[0],
                signal,
                throwOnError: true,
            });
            return data;
        },
        queryKey: getItemQueryKey(options),
    });
};

export const searchItemsQueryKey = (options: Options<SearchItemsData>) =>
    createQueryKey("searchItems", options);

/**
 * Search items
 * Search for items using a text query with various filtering and sorting options.
 * Returns a paginated collection of items matching the search criteria.
 *
 */
export const searchItemsOptions = (options: Options<SearchItemsData>) => {
    return queryOptions({
        queryFn: async ({ queryKey, signal }) => {
            const { data } = await searchItems({
                ...options,
                ...queryKey[0],
                signal,
                throwOnError: true,
            });
            return data;
        },
        queryKey: searchItemsQueryKey(options),
    });
};

/**
 * Complex item search
 * Performs an advanced search for items using a comprehensive search filter.
 * This endpoint accepts a SearchFilterData object in the request body,
 * allowing for complex filtering by multiple criteria simultaneously.
 * Returns a paginated collection of items matching the search criteria.
 *
 */
export const complexSearchItemsMutation = (
    options?: Partial<Options<ComplexSearchItemsData>>,
): UseMutationOptions<
    ComplexSearchItemsResponse,
    ComplexSearchItemsError,
    Options<ComplexSearchItemsData>
> => {
    const mutationOptions: UseMutationOptions<
        ComplexSearchItemsResponse,
        ComplexSearchItemsError,
        Options<ComplexSearchItemsData>
    > = {
        mutationFn: async (fnOptions) => {
            const { data } = await complexSearchItems({
                ...options,
                ...fnOptions,
                throwOnError: true,
            });
            return data;
        },
    };
    return mutationOptions;
};

export const getSearchFiltersQueryKey = (options: Options<GetSearchFiltersData>) =>
    createQueryKey("getSearchFilters", options);

/**
 * List user search filters
 * Retrieves all search filters for the authenticated user.
 * Results can be optionally sorted by creation date.
 * Requires valid Cognito JWT authentication.
 *
 */
export const getSearchFiltersOptions = (options: Options<GetSearchFiltersData>) => {
    return queryOptions({
        queryFn: async ({ queryKey, signal }) => {
            const { data } = await getSearchFilters({
                ...options,
                ...queryKey[0],
                signal,
                throwOnError: true,
            });
            return data;
        },
        queryKey: getSearchFiltersQueryKey(options),
    });
};

/**
 * Create a new search filter
 * Creates a new search filter for the authenticated user.
 * The search filter configuration is provided in the request body.
 * Returns the created search filter with generated ID and metadata.
 * Requires valid Cognito JWT authentication.
 *
 */
export const createSearchFilterMutation = (
    options?: Partial<Options<CreateSearchFilterData>>,
): UseMutationOptions<
    CreateSearchFilterResponse,
    CreateSearchFilterError,
    Options<CreateSearchFilterData>
> => {
    const mutationOptions: UseMutationOptions<
        CreateSearchFilterResponse,
        CreateSearchFilterError,
        Options<CreateSearchFilterData>
    > = {
        mutationFn: async (fnOptions) => {
            const { data } = await createSearchFilter({
                ...options,
                ...fnOptions,
                throwOnError: true,
            });
            return data;
        },
    };
    return mutationOptions;
};

/**
 * Delete a search filter
 * Deletes a specific search filter by its ID for the authenticated user.
 * The search filter must exist and belong to the authenticated user.
 * Requires valid Cognito JWT authentication.
 *
 */
export const deleteSearchFilterMutation = (
    options?: Partial<Options<DeleteSearchFilterData>>,
): UseMutationOptions<
    DeleteSearchFilterResponse,
    DeleteSearchFilterError,
    Options<DeleteSearchFilterData>
> => {
    const mutationOptions: UseMutationOptions<
        DeleteSearchFilterResponse,
        DeleteSearchFilterError,
        Options<DeleteSearchFilterData>
    > = {
        mutationFn: async (fnOptions) => {
            const { data } = await deleteSearchFilter({
                ...options,
                ...fnOptions,
                throwOnError: true,
            });
            return data;
        },
    };
    return mutationOptions;
};

export const getSearchFilterQueryKey = (options: Options<GetSearchFilterData>) =>
    createQueryKey("getSearchFilter", options);

/**
 * Get a specific search filter
 * Retrieves a specific search filter by its ID for the authenticated user.
 * Returns the complete search filter configuration and metadata.
 * Requires valid Cognito JWT authentication.
 *
 */
export const getSearchFilterOptions = (options: Options<GetSearchFilterData>) => {
    return queryOptions({
        queryFn: async ({ queryKey, signal }) => {
            const { data } = await getSearchFilter({
                ...options,
                ...queryKey[0],
                signal,
                throwOnError: true,
            });
            return data;
        },
        queryKey: getSearchFilterQueryKey(options),
    });
};

/**
 * Update a search filter
 * Updates a specific search filter by its ID for the authenticated user.
 * Allows partial updates - only provided fields will be modified.
 * If no fields are provided in the request body, returns the existing search filter unchanged.
 * Requires valid Cognito JWT authentication.
 *
 */
export const updateSearchFilterMutation = (
    options?: Partial<Options<UpdateSearchFilterData>>,
): UseMutationOptions<
    UpdateSearchFilterResponse,
    UpdateSearchFilterError,
    Options<UpdateSearchFilterData>
> => {
    const mutationOptions: UseMutationOptions<
        UpdateSearchFilterResponse,
        UpdateSearchFilterError,
        Options<UpdateSearchFilterData>
    > = {
        mutationFn: async (fnOptions) => {
            const { data } = await updateSearchFilter({
                ...options,
                ...fnOptions,
                throwOnError: true,
            });
            return data;
        },
    };
    return mutationOptions;
};
